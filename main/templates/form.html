{% extends "base.html" %}
{% block content %}


<script>
$(document).ready(function () {
    $("#id_province").change(function () {
        var selectedProvince = $(this).val();
        $.ajax({
            url: '/get-districts/',
            data: { province: selectedProvince },
            dataType: 'json',
            success: function (data) {
                var districtSelect = $("#id_district");
                districtSelect.empty();
                districtSelect.append(new Option('Select District', ''));

                $.each(data, function (index, district) {
                    districtSelect.append(new Option(district[1], district[0]));
                });
            }
        });
    });
    $(".toggle-province").change(function () {
      var selectedProvince = $(this).val();
      $.ajax({
        url: '/get-districts/',
        data: { province: selectedProvince },
        dataType: 'json',
        success: function (data) {
          var districtSelect = $("#id_district");
          districtSelect.empty();
          districtSelect.append(new Option('Select District', ''));

          $.each(data, function (index, district) {
            districtSelect.append(new Option(district, district));
          });
        }
      });
    });

    
    
});
</script>







  <div class="container mt-4" style="margin-bottom:200px;">
    <div class="row justify-content-center" style="font-weight: bold;">
      <div class="col-md-8" style="background-color: #f5f5f5;">
        <div class="card shadow mb-4" style="background-color: #E0ECF3;">
          <div class="card-body">
            <h2 class="card-title mb-4 text-center text-uppercase font-weight-bold text-primary">Enter Data / डाटा प्रविष्ट गर्नुहोस्</h2>
          </div>
        </div>
        <form method="post" data-primary-key="{{ item.primary_key }}">
          {% csrf_token %}
          {% if form.errors %}
                    <div class="alert alert-danger">
                        <ul>
                            {% for field, errors in form.errors.items %}
                                {% for error in errors %}
                                    <li>{{ error }}</li>
                                {% endfor %}
                            {% endfor %}
                        </ul>
                    </div>
                {% endif %}
          <div class="mb-3 row">
            <label for="id_name" class="form-label col-md-4 col-form-label-lg">Name/नाम :</label>
            <div class="col-md-8">
              {{ form.name }}
              <style>
                #id_name {
                    width: 100%; /* Set the desired width */
                }
            </style>
            </div>
          </div>

          <!-- Your existing form fields... -->

          <div class="mb-3 row">
            <label class="form-label col-md-4 col-form-label-lg">Additional People / अतिरिक्त व्यक्ति:</label>
            <div class="col-md-8">
                {{ form.additional_people }}
            </div>
          </div>
          <style>
            /* Increase the size of the checkbox */
          input[type="checkbox"] {
            width: 20px; /* Adjust width as needed */
            height: 20px; /* Adjust height as needed */
          }

          </style>

          

          <div id="additional-people-container">
            {% if form.additional_people.value %}
                <!-- Display additional fields only if checkbox is checked -->

                <div class="mb-3 row">
                  <label for="{{ form.num_of_add_people.id_for_label }}" class="form-label col-md-4 col-form-label-lg">Additional People Number/ अतिरिक्त व्यक्ति संख्या</label>

                  <div class="col-md-8">
                      {{ form.num_of_add_people }}
                  </div>
                </div>
                <style>
                  /* Increase the size of the checkbox */
                input[type="checkbox"] {
                  width: 20px; /* Adjust width as needed */
                  height: 20px; /* Adjust height as needed */
                }
      
                </style>

                <div class="mb-3 row">
                    <label for="{{ form.additional_people_names.id_for_label }}" class="form-label col-md-4 col-form-label-lg">Name / नाम:</label>
                    <div class="col-md-8">
                        {{ form.additional_people_names }}
                    </div>
                </div>
            {% endif %}
          </div>

          <script>
            $(document).ready(function () {
                // Show/hide additional people names field based on checkbox state
                $("#id_additional_people").change(function () {
                    var additionalPeopleContainer = $("#additional-people-container");
                    additionalPeopleContainer.empty();
        
                    if ($(this).prop('checked')) {
                        // Create the Number of Additional People input field
                        var numPeopleInputField = $("<input>", {
                            type: "number",
                            class: "form-control",
                            placeholder: "Enter Number of Additional People",
                            name: "num_of_add_people",
                        });
        
                        var numPeopleDivFormGroup = $("<div>", {
                            class: "mb-3 row",
                        });
        
                        var numPeopleLabel = $("<label>", {
                            class: "form-label col-md-4 col-form-label-lg",
                            text: "Additional People No/अतिरिक्त व्यक्ति संख्या",
                        });
        
                        var numPeopleDivCol = $("<div>", {
                            class: "col-md-8",
                        });
        
                        numPeopleDivCol.append(numPeopleInputField);
                        numPeopleDivFormGroup.append(numPeopleLabel).append(numPeopleDivCol);
                        additionalPeopleContainer.append(numPeopleDivFormGroup);
        
                        // Create the Additional People Names input field
                        var namesInputField = $("<input>", {
                            type: "text",
                            class: "form-control",
                            placeholder: "Enter Additional Person Name",
                            name: "additional_people_names",
                        });
        
                        var namesDivFormGroup = $("<div>", {
                            class: "mb-3 row",
                        });
        
                        var namesLabel = $("<label>", {
                            class: "form-label col-md-4 col-form-label-lg",
                            text: "Name / नाम:",
                        });
        
                        var namesDivCol = $("<div>", {
                            class: "col-md-8",
                        });
        
                        namesDivCol.append(namesInputField);
                        namesDivFormGroup.append(namesLabel).append(namesDivCol);
                        additionalPeopleContainer.append(namesDivFormGroup);
                    }
                });
            });
        </script>
        



  
          <div class="mb-3 row">
            <label for="{{ form.province.id_for_label }}" class="form-label col-md-4 col-form-label-lg">Province/प्रदेश:</label>
            <div class="col-md-8">
              <select name="{{ form.province.name }}" id="{{ form.province.id_for_label }}" class="form-select form-control">
                <option value="">Select Province</option>
                {% for value, label in form.province.field.choices %}
                <option value="{{ value }}">{{ label }}</option>
                {% endfor %}
              </select>
            </div>
          </div>
  
          <div class="mb-3 row">
            <label for="{{ form.district.id_for_label }}" class="form-label col-md-4 col-form-label-lg">District/जिल्ला:</label>
            <div class="col-md-8">
              <select name="{{ form.district.name }}" id="{{ form.district.id_for_label }}" class="form-select form-control">
                <option value="">Select District</option>
              </select>
            </div>
          </div>
  
          
  
          <div class="mb-3 row">
            <label for="{{ form.date.id_for_label }}" class="form-label col-md-4 col-form-label-lg">Date/मिती:</label>
            <div class="col-md-8">
              <input type="text" class="form-control nepali-datepicker" value="{{ form.date.value }}" name="date"  />
            </div>
          </div>

<script>
          $(document).ready(function() {
            // Initialize Nepali Datepicker
            $('.nepali-datepicker').nepaliDatePicker({
              dateFormat: 'YYYY-MM-DD',  // Set the desired date format
              disableDaysBefore: 0, 
              disableDaysAfter: 7  
            });
          });
          
        </script>     
  
          <div class="mb-3 row">
            <label for="id_id_number" class="form-label col-md-4 col-form-label-lg">Phone No./सम्पर्क नं. :</label>
            <div class="col-md-8">
              {{ form.id_number }}
              <style>
                #id_id_number {
                    width: 100%; /* Set the desired width */
                }
            </style>
            </div>
          </div>

          {% if user_is_admin %}
          <div class="mb-3 row">
              <label for="id_assigned_office" class="form-label col-md-4 col-form-label-lg">Quater to Visit:</label>
              <div class="col-md-8">
                  {{ form.assigned_office }}
                  <style>
                    #id_assigned_office {
                        width: 100%; /* Set the desired width */
                    }
                </style>
              </div>
          </div>
          {% endif %}
  
          <div class="mb-3 row">
            <label for="id_purpose" class="form-label col-md-4 col-form-label-lg">Visiting Purpose/कारण :</label>
            <div class="col-md-8">
                <select id="id_purpose" name="purpose" class="form-control">
                    <option value="" selected disabled>Please select the visiting purpose</option>
                    <option value="Official Staff">Official Staff</option>
                    <option value="Official Visit">Official Visit</option>
                    <option value="Personal/Family Visit">Personal/Family Visit</option>
                    <option value="Maintenance Staff">Maintenance Staff</option>
                    <option value="Media Staff">Media Staff</option>
                    <option value="Others">Others</option>
                </select>
                <input type="text" id="other_purpose" name="other_purpose" class="form-control" placeholder="Please specify the purpose">
            </div>
        </div>
    
        <script>
            document.getElementById('id_purpose').addEventListener('change', function() {
                var otherPurposeField = document.getElementById('other_purpose');
                if (this.value === 'Others') {
                    otherPurposeField.style.display = 'block';
                } else {
                    otherPurposeField.style.display = 'none';
                    otherPurposeField.value = '';
                }
            });
        </script>
        
        <style>
            #id_purpose {
                width: 100%; /* Set the desired width */
            }
            #other_purpose {
              display: none; /* Hide the text field by default */
              margin-top: 10px;
          }
        </style>
        
        
  
          <div class="mb-3 row">
            <label class="form-label col-md-4 col-form-label-lg">Has Vehicle/गाडी छ? :</label>
            <div class="col-md-8">
              {{ form.has_vehicle }}
            </div>
          </div>
  
          <div class="mb-3 row">
            <label for="id_vehicle_number" class="form-label col-md-4 col-form-label-lg">Vehicle Number/गाडीको नं. :</label>
            <div class="col-md-8">
              {{ form.vehicle_number }}
              <style>
                #id_vehicle_number {
                    width: 100%; /* Set the desired width */
                }
            </style>
            </div>
          </div>
          <script>
            $(document).ready(function() {
                // Hide the field initially
                $("#id_vehicle_number").css('display', 'none');
        
                // Toggle the visibility on checkbox change
                $(".toggle-vehicle").change(function() {
                    if (this.checked) {
                        $("#id_vehicle_number").fadeIn();  // Show the field
                    } else {
                        $("#id_vehicle_number").fadeOut();  // Hide the field
                    }
                });
            });
        </script>
        
  
          <div class="mb-3 row">
            <div class="col-md-12 text-center">
              <button type="submit" class="btn btn-primary btn-lg">Submit/  पेश गर्ने</button>
            </div>
          </div>
        </form>
      </div>
    </div>
  </div>
  
  <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
  
{% endblock %}







{% comment %} <script>
    $(document).ready(function() {
        $(".toggle-vehicle").change(function() {
            if (this.checked) {
                $("#id_vehicle_number").show();  // Show the field
            } else {
                $("#id_vehicle_number").hide();  // Hide the field
            }
        });
    });
</script> {% endcomment %}


{% comment %} <script>
    $(document).ready(function () {
      $(".toggle-province").change(function () {
        var selectedProvince = $(this).val();
        $.ajax({
          url: '/get-districts/',
          data: { province: selectedProvince },
          dataType: 'json',
          success: function (data) {
            var districtSelect = $("#id_district");
            districtSelect.empty();
            districtSelect.append(new Option('Select District', ''));
  
            $.each(data, function (index, district) {
              districtSelect.append(new Option(district, district));
            });
          }
        });
      });
      
    });
  </script> {% endcomment %}


  {% comment %} <div class="mb-3 row">
            <label class="form-label col-md-4 col-form-label-lg">Gender/लिङ्ग:</label>
            <div class="col-md-8">
              <div class="form-check form-check-inline">
                <input class="form-check-input" type="radio" name="{{ form.gender.name }}" id="male" value="male">
                <label class="form-check-label" for="male">Male/पुरुष</label>
              </div>
              <div class="form-check form-check-inline">
                <input class="form-check-input" type="radio" name="{{ form.gender.name }}" id="female" value="female">
                <label class="form-check-label" for="female">Female/महिला</label>
              </div>
              <div class="form-check form-check-inline">
                <input class="form-check-input" type="radio" name="{{ form.gender.name }}" id="other" value="other">
                <label class="form-check-label" for="other">Other/अन्य</label>
              </div>
            </div>
          </div> {% endcomment %}